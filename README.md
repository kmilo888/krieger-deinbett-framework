# krieger-deinbett-framework

An e2e framework for testing Deinbett.de page

## Installation

```
$ npm install
```

## Introduction

This automated framework tests basic functionality for the Deinbett.de page. It uses the Cypress framework as the Javascript End to End framework combined with the cypress-cucumber-preprocessor library to add Gherkin language implementation for its automated test cases.

It was developed on Windows 10 OS. It still have not been tested in other Operating Systems.

## Run Scripts

### Cypress UI

To run the Integrated Cypress UI:

```
$ npm run cy:ui
```

### Run tests in background from the cli

To run the default Cypress (Electron browser):

```
$ npm run cy:run
```

To run in Chrome:

```
$ npm run cy:run:chrome
```

To run in Firefox:

```
$ npm run cy:run:firefox
```

### Run tests and generate HTML reports in background from the cli

To run in Chrome:

```
$ npm run cy:reports:chrome
```

To run in Firefox:

```
$ npm run cy:run:firefox
```

## Docker Integration

This framework also supports running in Docker. Docker image has Linux installed, so tests will run in this operating system.

### Build Docker Images 

Build Docker image for Chrome

```
$ npm run docker:build:chrome
```

Build Docker image for Firefox

```
$ npm run docker:build:firefox
```
### Run tests in background from Docker

To run in Chrome:

```
$ npm run docker:run:chrome
```

To run in Firefox:

```
$ npm run docker:run:firefox
```

### Run tests and generate HTML reports in background from Docker

To run in Chrome:

```
$ npm run cy:reports:chrome:docker
```

To run in Firefox:

```
$ npm run cy:reports:chrome:firefox
```

## Architecture

The architecture of this framework is based in the normal Integrations between Cypress and Cucumber. It additionally has a pom folder in which the Page Object Model pattern is implemented. Node was used for compiling and for adding required libraries.

### Dependencies

"cypress": Main test automation frameork
"cypress-cucumber-preprocessor": Package in charge of integrating the Gherkin language in the test cases, with javascript
"multiple-cucumber-html-reporter": Package in charge of generating the html reports
"@faker-js/faker": Generates a test user which will be the one that executes the tests    
"cypress-xpath": Package to handle the xpath selectors in some page elements

### Fixtures

In this folder, the Faker library will generate a random json file with some random user information at the beginning of the execution. This is renewed everytime the framework is started.

### Integration

The features for the Cucumber implementation and the steps definitions for all the test cases were created here. A feature file was created for each requirement and the steps implmementation can be found in the javascript files. Moreover a common directory was added, in which the common steps implmemntations between the requirements were added.

### Plugins

In this folder, in the index.js file all configurations should be added. In this case the cucumber preprocesor needs some special configuration which was added here.

### Pom

The Page Object Model pattern was implemented here. It is separated so each page and its elements have their own class. It also has a modal folder in which commmon modals which normally appear on more than one page, can have their own class just in the same way as normal pages.

### Support

Support commands normally are added in this folder. In the case of this framework, the support command that generates the random user, is implemented in here.

### Reports, Screenshots & videos

This autogenerated folders, which are not included in the repository, keep the evidences generated from the execution of the framework.

## Known issues

* Email functionality for receiving forgotten password email is not yet implemented
* Sum and total verification seems to be passing, but the actual values that are being compared are 0.
* Firefox tests are failing due to a bug in the new Firefox version -> https://github.com/cypress-io/cypress/issues/22086
